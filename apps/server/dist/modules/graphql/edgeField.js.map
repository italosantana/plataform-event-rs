{"version":3,"file":"edgeField.js","names":["edgeField","connection","load","name","edgeName","type","edgeType","resolve","id","args","context","node","cursor","toGlobalId","_id"],"sources":["../../../src/modules/graphql/edgeField.ts"],"sourcesContent":["import { toGlobalId } from 'graphql-relay';\nimport { GraphQLConnectionDefinitions } from 'graphql-relay/connection/connection';\n\ntype EdgeFieldParams<Context> = {\n    connection: GraphQLConnectionDefinitions;\n    load: (context: Context, id: string) => Promise<any>;\n    name: string;\n    edgeName: string;\n};\nexport const edgeField = <Context extends object>({ connection, load, name, edgeName }: EdgeFieldParams<Context>) => ({\n    [edgeName]: {\n        type: connection.edgeType,\n        resolve: async ({ id }: any, args: any, context: any) => {\n            const node = await load(context, id);\n\n            if (!node) {\n                return null;\n            }\n\n            return {\n                cursor: toGlobalId(name, node._id),\n                node,\n            };\n        },\n    },\n});\n"],"mappings":";;;;;;;AAAA;;;;;;AASO,MAAMA,SAAS,GAAG,CAAyB;EAAEC,UAAF;EAAcC,IAAd;EAAoBC,IAApB;EAA0BC;AAA1B,CAAzB,MAA6F;EAClH,CAACA,QAAD,GAAY;IACRC,IAAI,EAAEJ,UAAU,CAACK,QADT;IAERC,OAAO;MAAA,6BAAE,WAAO;QAAEC;MAAF,CAAP,EAAoBC,IAApB,EAA+BC,OAA/B,EAAgD;QACrD,MAAMC,IAAI,SAAST,IAAI,CAACQ,OAAD,EAAUF,EAAV,CAAvB;;QAEA,IAAI,CAACG,IAAL,EAAW;UACP,OAAO,IAAP;QACH;;QAED,OAAO;UACHC,MAAM,EAAE,IAAAC,wBAAA,EAAWV,IAAX,EAAiBQ,IAAI,CAACG,GAAtB,CADL;UAEHH;QAFG,CAAP;MAIH,CAXM;;MAAA;QAAA;MAAA;IAAA;EAFC;AADsG,CAA7F,CAAlB"}