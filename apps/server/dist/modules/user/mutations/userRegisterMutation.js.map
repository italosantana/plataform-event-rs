{"version":3,"file":"userRegisterMutation.js","names":["mutationWithClientMutationId","name","inputFields","email","type","GraphQLNonNull","GraphQLString","password","mutateAndGetPayload","rest","hasUser","UserModel","countDocuments","trim","Error","user","save","id","_id","sucess","outputFields","me","UserType","resolve","findById"],"sources":["../../../../src/modules/user/mutations/userRegisterMutation.ts"],"sourcesContent":["import { GraphQLString, GraphQLNonNull } from 'graphql';\nimport { mutationWithClientMutationId } from 'graphql-relay';\n\nimport { UserModel } from '../UserModel';\nimport { UserType } from '../UserType';\n\n\nexport default mutationWithClientMutationId({\n    name: 'UserRegister',\n    inputFields: {\n        email: { type: new GraphQLNonNull(GraphQLString) },\n        password: { type: new GraphQLNonNull(GraphQLString) },\n    },\n    mutateAndGetPayload: async ({ email, ...rest }) => {\n        const hasUser =\n            (await UserModel.countDocuments({ email: email.trim() })) > 0;\n\n        if (hasUser) {\n            throw new Error('This email has been registered. Please try again!');\n        }\n\n        const user = new UserModel({\n            ...rest,\n            email,\n        });\n\n        await user.save();\n\n\n        return {\n            id: user._id,\n            sucess: 'Success!',\n        };\n    },\n    outputFields: {\n        me: {\n            type: UserType,\n            resolve: async ({ id }) => await UserModel.findById(id),\n        },\n    },\n});"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;;;;;;;;;;;;;;;;;eAGe,IAAAA,0CAAA,EAA6B;EACxCC,IAAI,EAAE,cADkC;EAExCC,WAAW,EAAE;IACTC,KAAK,EAAE;MAAEC,IAAI,EAAE,IAAIC,uBAAJ,CAAmBC,sBAAnB;IAAR,CADE;IAETC,QAAQ,EAAE;MAAEH,IAAI,EAAE,IAAIC,uBAAJ,CAAmBC,sBAAnB;IAAR;EAFD,CAF2B;EAMxCE,mBAAmB;IAAA,8BAAE,iBAA8B;MAAA,IAAvB;QAAEL;MAAF,CAAuB;MAAA,IAAXM,IAAW;;MAC/C,MAAMC,OAAO,GACT,OAAOC,oBAAA,CAAUC,cAAV,CAAyB;QAAET,KAAK,EAAEA,KAAK,CAACU,IAAN;MAAT,CAAzB,CAAP,IAA4D,CADhE;;MAGA,IAAIH,OAAJ,EAAa;QACT,MAAM,IAAII,KAAJ,CAAU,mDAAV,CAAN;MACH;;MAED,MAAMC,IAAI,GAAG,IAAIJ,oBAAJ,iCACNF,IADM;QAETN;MAFS,GAAb;MAKA,MAAMY,IAAI,CAACC,IAAL,EAAN;MAGA,OAAO;QACHC,EAAE,EAAEF,IAAI,CAACG,GADN;QAEHC,MAAM,EAAE;MAFL,CAAP;IAIH,CApBkB;;IAAA;MAAA;IAAA;EAAA,GANqB;EA2BxCC,YAAY,EAAE;IACVC,EAAE,EAAE;MACAjB,IAAI,EAAEkB,kBADN;MAEAC,OAAO;QAAA,8BAAE,WAAO;UAAEN;QAAF,CAAP;UAAA,aAAwBN,oBAAA,CAAUa,QAAV,CAAmBP,EAAnB,CAAxB;QAAA,CAAF;;QAAA;UAAA;QAAA;MAAA;IAFP;EADM;AA3B0B,CAA7B,C"}