{"version":3,"file":"UserModel.js","names":["UserSchema","Schema","name","type","String","required","password","email","unique","timestamps","createdAt","updatedAt","pre","next","isModified","isNew","hashedPassword","hashPassword","methods","salt","bcrypt","genSalt","hash","UserModel","mongoose","model"],"sources":["../../../src/modules/user/UserModel.ts"],"sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\nimport bcrypt from 'bcryptjs';\n\nexport interface User {\n    name: string;\n    email: string;\n    password: string;\n}\n\nexport interface UserDocument extends User, Document {\n    hashPassword(password: string): Promise<string>;\n}\n\nconst UserSchema = new Schema(\n    {\n        name: {\n            type: String,\n            required: true,\n        },\n        password: {\n            type: String,\n            required: true,\n        },\n        email: {\n            type: String,\n            required: true,\n            unique: true,\n        },\n    },\n    {\n        timestamps: {\n            createdAt: true,\n            updatedAt: true,\n        },\n    },\n);\n\nUserSchema.pre<UserDocument>('save', async function (next) {\n    if (this.isModified('password') || this.isNew) {\n        const hashedPassword = await this.hashPassword(this.password);\n        this.password = hashedPassword;\n    }\n\n    return next();\n});\n\nUserSchema.methods = {\n    hashPassword: async function (password: string) {\n        const salt = await bcrypt.genSalt(10);\n        const hashedPassword = await bcrypt.hash(password, salt);\n\n        return hashedPassword;\n    },\n};\n\nexport const UserModel = mongoose.model<UserDocument>('User', UserSchema);"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;AAYA,MAAMA,UAAU,GAAG,IAAIC,gBAAJ,CACf;EACIC,IAAI,EAAE;IACFC,IAAI,EAAEC,MADJ;IAEFC,QAAQ,EAAE;EAFR,CADV;EAKIC,QAAQ,EAAE;IACNH,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE;EAFJ,CALd;EASIE,KAAK,EAAE;IACHJ,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE,IAFP;IAGHG,MAAM,EAAE;EAHL;AATX,CADe,EAgBf;EACIC,UAAU,EAAE;IACRC,SAAS,EAAE,IADH;IAERC,SAAS,EAAE;EAFH;AADhB,CAhBe,CAAnB;AAwBAX,UAAU,CAACY,GAAX,CAA6B,MAA7B;EAAA,6BAAqC,WAAgBC,IAAhB,EAAsB;IACvD,IAAI,KAAKC,UAAL,CAAgB,UAAhB,KAA+B,KAAKC,KAAxC,EAA+C;MAC3C,MAAMC,cAAc,SAAS,KAAKC,YAAL,CAAkB,KAAKX,QAAvB,CAA7B;MACA,KAAKA,QAAL,GAAgBU,cAAhB;IACH;;IAED,OAAOH,IAAI,EAAX;EACH,CAPD;;EAAA;IAAA;EAAA;AAAA;AASAb,UAAU,CAACkB,OAAX,GAAqB;EACjBD,YAAY;IAAA,8BAAE,WAAgBX,QAAhB,EAAkC;MAC5C,MAAMa,IAAI,SAASC,iBAAA,CAAOC,OAAP,CAAe,EAAf,CAAnB;MACA,MAAML,cAAc,SAASI,iBAAA,CAAOE,IAAP,CAAYhB,QAAZ,EAAsBa,IAAtB,CAA7B;MAEA,OAAOH,cAAP;IACH,CALW;;IAAA;MAAA;IAAA;EAAA;AADK,CAArB;;AASO,MAAMO,SAAS,GAAGC,iBAAA,CAASC,KAAT,CAA6B,MAA7B,EAAqCzB,UAArC,CAAlB"}