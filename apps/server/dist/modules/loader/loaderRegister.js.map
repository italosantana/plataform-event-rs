{"version":3,"file":"loaderRegister.js","names":["loaders","registerLoader","key","getLoader","getDataloaders","Object","keys","reduce","prev","loaderKey"],"sources":["../../../src/modules/loader/loaderRegister.ts"],"sourcesContent":["import { Types } from 'mongoose';\n\nexport type DataLoaderKey = Types.ObjectId | string | undefined | null;\n\nexport interface DataLoaders {\n  UserLoader: ReturnType<typeof import('../user/UserLoader').getLoader>;\n}\n\nconst loaders: {\n  [Name in keyof DataLoaders]: () => DataLoaders[Name];\n} = {} as any;\n\nconst registerLoader = <Name extends keyof DataLoaders>(key: Name, getLoader: () => DataLoaders[Name]) => {\n  loaders[key] = getLoader as any;\n};\n\nconst getDataloaders = (): DataLoaders =>\n  (Object.keys(loaders) as (keyof DataLoaders)[]).reduce(\n    (prev, loaderKey) => ({\n      ...prev,\n      [loaderKey]: loaders[loaderKey](),\n    }),\n    {},\n  ) as any;\n\nexport { registerLoader, getDataloaders };\n"],"mappings":";;;;;;;;;;;;;AAQA,MAAMA,OAEL,GAAG,EAFJ;;AAIA,MAAMC,cAAc,GAAG,CAAiCC,GAAjC,EAA4CC,SAA5C,KAAmF;EACxGH,OAAO,CAACE,GAAD,CAAP,GAAeC,SAAf;AACD,CAFD;;;;AAIA,MAAMC,cAAc,GAAG,MACpBC,MAAM,CAACC,IAAP,CAAYN,OAAZ,CAAD,CAAgDO,MAAhD,CACE,CAACC,IAAD,EAAOC,SAAP,qCACKD,IADL;EAEE,CAACC,SAAD,GAAaT,OAAO,CAACS,SAAD,CAAP;AAFf,EADF,EAKE,EALF,CADF"}